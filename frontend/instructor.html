<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Instructor page</title>
		<link href="css/main.css" rel="stylesheet">
	</head>

	<body>
		<div class="color-main1 right-align">
	        <a href="login.html" class="color-main1 nav-bar">logout</a>
	    </div>
		
		<div class="center">
			<h1 id="uname"></h1><hr>
		</div>

		<div class="container color-main2 center">
			<div>
				<button class="button color-bold1" onclick="location.href='maketest.html';">Add/Remove Test</button>
				<button class="button color-bold1" onclick="location.href='question.html';">Add/Remove Question</button>
			</div>
		</div>


		<div class="container color-main2 center">
			<h2>Available Tests</h2>
			<ul id="testlist" class="left-align"></ul>
		</div>

		<script type="text/javascript">
			
            function fillTestList(resp){
                var json = JSON.parse(resp);
                var list = document.getElementById("testlist");
                for(var i = 0; i < json.tests.length; i++){
                    var entry = document.createElement('li');
                    entry.appendChild(document.createTextNode(JSON.parse(json.tests[i]).name));
                    list.appendChild(entry);
                }
            }

            window.onload = function(){
            	//fill username
            	document.getElementById('uname').appendChild(document.createTextNode('Welcome ' + window.localStorage.getItem('username') + '!'));

                var xmlhttp = new XMLHttpRequest();
                //response from middle
                xmlhttp.onreadystatechange = function() {
                    if (this.readyState == 4) {
                    	if(this.responseText.indexOf('ERROR') !== -1){
                			alert("Error in GetAllTests response!");
                			return;
                		}
                        fillTestList(this.responseText);
                    }
                };
                xmlhttp.open("POST", "https://web.njit.edu/~smc53/cs490/request-generic.php?request=GetAllTests");
                xmlhttp.send();
			}
		</script>
	</body>
</html>

