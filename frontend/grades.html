
<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Student Grades</title>
		<link href="css/main.css" rel="stylesheet">
	</head>

	<body>
		<div class="color-main1">
	        <a href="student.html" class="color-main1 nav-bar">home</a>
	    </div>
		
		<div class="center">
			<h1>Available Grades</h1><hr>
		</div>

		<div class="container color-main2 left-align">
			<div class="container color-main2 center">
				<ul id="testlist" class="left-align"></ul>
			</div>
		</div>


		<script type="text/javascript">
			window.onload = function(){
				var xmlhttp = new XMLHttpRequest();
				//response from middle
				xmlhttp.onreadystatechange = function() {
				    if (this.readyState == 4) {
				    	var json = JSON.parse(this.responseText);
				    	var list = document.getElementById('testlist');
				    	console.log(json.grades.length);
				    	for(var i=0; i<json.grades.length;i++){
				    		var jsdata = JSON.parse(json.grades[i]);
		                    var entry = document.createElement('li');
		                    entry.innerHTML = 'Exam ID: ' + jsdata.examID; 
		                    list.appendChild(entry);
		                    var textnode = document.createElement('div');
		                    textnode.innerHTML = jsdata.comments
		                    list.appendChild(textnode);
		                    //list.appendChild(document.createTextNode());
		                    list.appendChild(document.createElement('br'));
				    	}
				    }
				};

				xmlhttp.open("POST", "https://web.njit.edu/~smc53/cs490/request-generic.php?request=GetStudentGrades&username=" + window.localStorage.getItem('username'));
				xmlhttp.send();
			}
		</script>
	</body>
</html>

