
<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Student Grades</title>
		<link href="css/main.css" rel="stylesheet">
	</head>

	<body>
		<div class="color-main1">
	        <a href="student.html" class="color-main1 nav-bar">home</a>
	    </div>
		
		<div class="main-container">
			<div class="center">
				<h1><b>View Test Grade</b></h1><hr>
			</div>
			<div class="container color-main2 left-align">
				<h2 id="testname" class="center"></h2>
				<div class="container color-main2 center">
					<table id="testlist">
						<tr>
							<th>
								Question
							</th>
							<th>
								Score
							</th>
							<th>
								Comments
							</th>
						</tr>	
					</table>
				</div>
			</div>
		</div>

		<script type="text/javascript">
			window.onload = function(){
				var xmlhttp = new XMLHttpRequest();
				xmlhttp.onreadystatechange = function() {
				    if (this.readyState == 4) {
				    	var json = JSON.parse(this.responseText);
				    	var list = document.getElementById('testlist');

				    	var grade_idx;
				    	for(var i=0; i<json.grades.length;i++){
				    		console.log(JSON.parse(json.grades[i]).examID);
				    		if(JSON.parse(json.grades[i]).examID === (window.location.search.substring(1).split("=")[1]) ){
				    			grade_idx = i;
				    			break;
				    		}	
				    	}
				    	var grade = JSON.parse(json.grades[grade_idx]);
				    	document.getElementById('testname').appendChild(document.createTextNode(grade.examID + " [PH, need test name here]"));

	                    var entry = document.createElement('td');
	                    entry.innerHTML = '[PH, need a q name here] '; 
	                    list.appendChild(entry);

	                    var score = document.createElement('td');
	                    score.innerHTML = '[PH, score]'; 
	                    list.appendChild(score);
	                    var cmt_td = document.createElement('td');
	                    cmt_td.innerHTML = '[PH, comments need to be broken up by question] ' + grade.comments; 
	                    list.appendChild(cmt_td);
				    }
				};

				xmlhttp.open("POST", "https://web.njit.edu/~smc53/cs490/request-generic.php?request=GetStudentGrades&username=" + window.localStorage.getItem('username'));
				xmlhttp.send();
			}
		</script>
	</body>
</html>

