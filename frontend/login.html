<!DOCTYPE html>
<html>
<head>
	<title>Beta login</title>
</head>
<body>

<div style="text-align: center">
	<h1>Login</h1><hr>
</div>
</b></b><hr>

<div style="text-align: center">
	<h3>Usename | Password</h3>
	<p><b>Enter a username and password in the input field below:</b></p>
	<form> 
	Username<input type="text" id="username"></input>
	Password<input type="password" id="passwd"></input>
	<button type="button" onclick="showText()">Submit</button>
	</form>
	<p>Response from Middle-end: <span id="txtHint"></span></p>
</div>
<div>
    <a href="instructor.html">instuctor</a>
    <a href="student.html">student</a>
    </div>
<hr>


<footer>
    <div style="text-align: center">
        <h2>Group Members</h2>
        Steve Coluccio - Frontend</br>
        Mateusz Stolarz - Middle</br>
        Amine Hosseini - Backend</br>
    </div>
</footer>

<script>

function showText() {
    var uname = document.getElementById("username").value;
    var passwd = document.getElementById("passwd").value;

    if (uname.length == 0) { 
        document.getElementById("txtHint").innerHTML = "Enter a username";
        return;
    } else if (passwd.length == 0){
        document.getElementById("txtHint").innerHTML = "Enter a password";
        return; 
    }


    var xmlhttp = new XMLHttpRequest();
    
    //response from middle
    xmlhttp.onreadystatechange = function() {
        if (this.readyState == 4) {
            var resp = JSON.parse(this.responseText);
            var display_text = "<br />";
            if(resp.db == "true"){
                display_text += "Valid username/passsword in project database.<br />";

            }else{
                display_text += "Invalid username/passsword in project database.<br />";
            }
            if(resp.njit == "true"){
                display_text += "Valid username/passsword in NJIT database.<br />";
                window.location = "student.html"
            }else{
                display_text += "Invalid username/password in NJIT database.<br />"
            }
            document.getElementById("txtHint").innerHTML = display_text;
        }
    };

    xmlhttp.open("POST", "https://web.njit.edu/~smc53/cgi-bin/connect.php?un=" + uname + "&pw=" + passwd);
    xmlhttp.send();
    
}

</script>
</body>

